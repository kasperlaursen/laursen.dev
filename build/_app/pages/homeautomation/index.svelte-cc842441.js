import{S as t,i as e,s as n,P as s,e as a,t as o,k as r,Q as i,a as c,c as l,g as h,d as u,n as d,b as f,L as g,f as $,D as m,R as p,h as y,T as v,l as x,E as w,O as b,j as k,m as E,o as j,x as M,u as A,v as H,U as T,A as L,V as S,W as z,X,Y,Z as D,_ as I,$ as V,a0 as O,a1 as B,a2 as N,H as P,I as R,J as W,K as J,a3 as K,a4 as Q}from"../../chunks/vendor-d4c6ea5c.js";function U(t,e,n){const s=t.slice();return s[6]=e[n],s}function Z(t){let e,n,x,w,b,k,E,j,M,A,H,T,L,S=t[6].data.name+"",z=t[6].data.count?" ("+t[6].data.count+")":"";function X(){return t[4](t[6])}function Y(){return t[5](t[6])}return{c(){e=s("foreignObject"),n=a("div"),x=a("a"),w=o(S),b=o(z),E=r(),this.h()},l(t){e=i(t,"foreignObject",{id:!0,x:!0,y:!0,height:!0,width:!0,class:!0,style:!0});var s=c(e);n=l(s,"DIV",{class:!0});var a=c(n);x=l(a,"A",{href:!0,class:!0});var o=c(x);w=h(o,S),b=h(o,z),o.forEach(u),E=d(a),a.forEach(u),s.forEach(u),this.h()},h(){var s;f(x,"href",k=t[6].data.url),f(x,"class","svelte-13dvywg"),f(n,"class","svelte-13dvywg"),f(e,"id",j=t[6].data.id),f(e,"x",M=t[6].x?t[6].x-t[1]/2:0),f(e,"y",A=t[6].y?t[6].y-t[1]/2:0),f(e,"height",t[1]),f(e,"width",t[1]),f(e,"class","circle svelte-13dvywg"),f(e,"style",H=`--element-bg-color: var(${null!=(s=t[6].data.color)?s:"--gray"})`),g(e,"highlight",t[6].data.highlight)},m(t,s){$(t,e,s),m(e,n),m(n,x),m(x,w),m(x,b),m(n,E),T||(L=[p(e,"mouseenter",X),p(e,"mouseleave",Y)],T=!0)},p(n,s){var a;t=n,1&s&&S!==(S=t[6].data.name+"")&&y(w,S),1&s&&z!==(z=t[6].data.count?" ("+t[6].data.count+")":"")&&y(b,z),1&s&&k!==(k=t[6].data.url)&&f(x,"href",k),1&s&&j!==(j=t[6].data.id)&&f(e,"id",j),3&s&&M!==(M=t[6].x?t[6].x-t[1]/2:0)&&f(e,"x",M),3&s&&A!==(A=t[6].y?t[6].y-t[1]/2:0)&&f(e,"y",A),2&s&&f(e,"height",t[1]),2&s&&f(e,"width",t[1]),1&s&&H!==(H=`--element-bg-color: var(${null!=(a=t[6].data.color)?a:"--gray"})`)&&f(e,"style",H),1&s&&g(e,"highlight",t[6].data.highlight)},d(t){t&&u(e),T=!1,v(L)}}}function _(t){let e,n=t[0],s=[];for(let a=0;a<n.length;a+=1)s[a]=Z(U(t,n,a));return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=x()},l(t){for(let e=0;e<s.length;e+=1)s[e].l(t);e=x()},m(t,n){for(let e=0;e<s.length;e+=1)s[e].m(t,n);$(t,e,n)},p(t,[a]){if(15&a){let o;for(n=t[0],o=0;o<n.length;o+=1){const r=U(t,n,o);s[o]?s[o].p(r,a):(s[o]=Z(r),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},i:w,o:w,d(t){b(s,t),t&&u(e)}}}function q(t,e,n){let{nodes:s}=e,{nodeSize:a}=e,{onMouseEnter:o}=e,{onMouseLeave:r}=e;return t.$$set=t=>{"nodes"in t&&n(0,s=t.nodes),"nodeSize"in t&&n(1,a=t.nodeSize),"onMouseEnter"in t&&n(2,o=t.onMouseEnter),"onMouseLeave"in t&&n(3,r=t.onMouseLeave)},[s,a,o,r,t=>o(t),t=>r(t)]}class C extends t{constructor(t){super(),e(this,t,q,_,n,{nodes:0,nodeSize:1,onMouseEnter:2,onMouseLeave:3})}}function F(t,e,n){const s=t.slice();return s[1]=e[n],s}function G(t){let e,n,a,o,r,l;return{c(){e=s("g"),n=s("line"),this.h()},l(t){e=i(t,"g",{stroke:!0,"stroke-opacity":!0});var s=c(e);n=i(s,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),c(n).forEach(u),s.forEach(u),this.h()},h(){f(n,"x1",a=t[1].source.x),f(n,"y1",o=t[1].source.y),f(n,"x2",r=t[1].target.x),f(n,"y2",l=t[1].target.y),f(e,"stroke","#999"),f(e,"stroke-opacity","0.6")},m(t,s){$(t,e,s),m(e,n)},p(t,e){1&e&&a!==(a=t[1].source.x)&&f(n,"x1",a),1&e&&o!==(o=t[1].source.y)&&f(n,"y1",o),1&e&&r!==(r=t[1].target.x)&&f(n,"x2",r),1&e&&l!==(l=t[1].target.y)&&f(n,"y2",l)},d(t){t&&u(e)}}}function tt(t){let e,n=t[0],s=[];for(let a=0;a<n.length;a+=1)s[a]=G(F(t,n,a));return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=x()},l(t){for(let e=0;e<s.length;e+=1)s[e].l(t);e=x()},m(t,n){for(let e=0;e<s.length;e+=1)s[e].m(t,n);$(t,e,n)},p(t,[a]){if(1&a){let o;for(n=t[0],o=0;o<n.length;o+=1){const r=F(t,n,o);s[o]?s[o].p(r,a):(s[o]=G(r),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},i:w,o:w,d(t){b(s,t),t&&u(e)}}}function et(t,e,n){let{links:s}=e;return t.$$set=t=>{"links"in t&&n(0,s=t.links)},[s]}class nt extends t{constructor(t){super(),e(this,t,et,tt,n,{links:0})}}function st(t){let e,n,a,o;return n=new nt({props:{links:t[2]}}),a=new C({props:{nodes:t[3],nodeSize:ot,onMouseEnter:t[4],onMouseLeave:t[5]}}),{c(){e=s("svg"),k(n.$$.fragment),k(a.$$.fragment),this.h()},l(t){e=i(t,"svg",{height:!0,width:!0});var s=c(e);E(n.$$.fragment,s),E(a.$$.fragment,s),s.forEach(u),this.h()},h(){f(e,"height",at),f(e,"width",t[0])},m(s,r){$(s,e,r),j(n,e,null),j(a,e,null),t[8](e),o=!0},p(t,[s]){const r={};4&s&&(r.links=t[2]),n.$set(r);const i={};8&s&&(i.nodes=t[3]),a.$set(i),(!o||1&s)&&f(e,"width",t[0])},i(t){o||(M(n.$$.fragment,t),M(a.$$.fragment,t),o=!0)},o(t){A(n.$$.fragment,t),A(a.$$.fragment,t),o=!1},d(s){s&&u(e),H(n),H(a),t[8](null)}}}let at=700;const ot=80;function rt(t,e,n){let s,a,o,{data:r={name:"Home Assistant",children:[{}]}}=e,{width:i}=e;const c=ot/2,l=T(r);let h,u=B;function d(t){const e=h.find(u.invertX(t.x),u.invertY(t.y),c);return e&&(e.x=u.applyX(e.x),e.y=u.applyY(e.y)),e}function f(){h.tick(),n(3,a=[...a]),n(2,s=[...s])}function g(t){t.active||h.alphaTarget(.3).restart(),t.subject.fx=u.invertX(t.subject.x),t.subject.fy=u.invertY(t.subject.y)}function $(t){t.subject.fx=u.invertX(t.x),t.subject.fy=u.invertY(t.y)}function m(t){t.active||h.alphaTarget(0),t.subject.fx=null,t.subject.fy=null}return L((()=>{n(7,h=S(a).force("link",z(s).id((t=>t.id)).distance(ot).strength(.5)).force("charge",X().strength(-300)).force("collide",Y(ot/2).strength(.4)).force("center",D(i/2,at/2).strength(.5)).force("y",I(at/2).strength(.06)).on("tick",f)),V(o).call(O().container(o).subject(d).on("start",g).on("drag",$).on("end",m))})),t.$$set=t=>{"data"in t&&n(6,r=t.data),"width"in t&&n(0,i=t.width)},t.$$.update=()=>{129&t.$$.dirty&&(null==h||h.force("center",D(i/2,at/2).strength(.5)))},n(2,s=l.links()),n(3,a=l.descendants()),[i,o,s,a,function t(e){console.log(V("#"+e.data.id)),V("#"+e.data.id).classed("highlight",!0),e.children&&e.children.forEach(t)},function t(e){V("#"+e.data.id).classed("highlight",!1),e.children&&e.children.forEach(t)},r,h,function(t){N[t?"unshift":"push"]((()=>{o=t,n(1,o)}))}]}class it extends t{constructor(t){super(),e(this,t,rt,st,n,{data:6,width:0})}}function ct(t){let e,n,s;const o=t[3].default,r=P(o,t,t[2],null);return{c(){e=a("div"),r&&r.c(),this.h()},l(t){e=l(t,"DIV",{style:!0,class:!0});var n=c(e);r&&r.l(n),n.forEach(u),this.h()},h(){f(e,"style",n=`--spacing: ${t[1][t[0]]}`),f(e,"class","svelte-e7cenx")},m(t,n){$(t,e,n),r&&r.m(e,null),s=!0},p(t,[a]){r&&r.p&&(!s||4&a)&&R(r,o,t,t[2],s?J(o,t[2],a,null):W(t[2]),null),(!s||1&a&&n!==(n=`--spacing: ${t[1][t[0]]}`))&&f(e,"style",n)},i(t){s||(M(r,t),s=!0)},o(t){A(r,t),s=!1},d(t){t&&u(e),r&&r.d(t)}}}function lt(t,e,n){let{$$slots:s={},$$scope:a}=e,{spacing:o="large"}=e;return t.$$set=t=>{"spacing"in t&&n(0,o=t.spacing),"$$scope"in t&&n(2,a=t.$$scope)},[o,{none:"0",small:"1em",medium:"2em",large:"3em"},a,s]}class ht extends t{constructor(t){super(),e(this,t,lt,ct,n,{spacing:0})}}function ut(t){let e,n,s,o;return n=new it({props:{data:t[0],width:t[1]}}),{c(){e=a("div"),k(n.$$.fragment),this.h()},l(t){e=l(t,"DIV",{});var s=c(e);E(n.$$.fragment,s),s.forEach(u),this.h()},h(){K((()=>t[2].call(e)))},m(a,r){$(a,e,r),j(n,e,null),s=Q(e,t[2].bind(e)),o=!0},p(t,e){const s={};1&e&&(s.data=t[0]),2&e&&(s.width=t[1]),n.$set(s)},i(t){o||(M(n.$$.fragment,t),o=!0)},o(t){A(n.$$.fragment,t),o=!1},d(t){t&&u(e),H(n),s()}}}function dt(t){let e,n,s,i,f,g,p,y,v,x,w,b,T;return b=new ht({props:{spacing:"none",$$slots:{default:[ut]},$$scope:{ctx:t}}}),{c(){e=a("h1"),n=o("Home Automation"),s=r(),i=a("p"),f=o("Thanks for visiting. "),g=a("br"),p=o("\n\tThis page is still a "),y=a("b"),v=o("work in progress"),x=o(", but below you see a diagram of my Home Automation\n\tsetup!"),w=r(),k(b.$$.fragment)},l(t){e=l(t,"H1",{});var a=c(e);n=h(a,"Home Automation"),a.forEach(u),s=d(t),i=l(t,"P",{});var o=c(i);f=h(o,"Thanks for visiting. "),g=l(o,"BR",{}),p=h(o,"\n\tThis page is still a "),y=l(o,"B",{});var r=c(y);v=h(r,"work in progress"),r.forEach(u),x=h(o,", but below you see a diagram of my Home Automation\n\tsetup!"),o.forEach(u),w=d(t),E(b.$$.fragment,t)},m(t,a){$(t,e,a),m(e,n),$(t,s,a),$(t,i,a),m(i,f),m(i,g),m(i,p),m(i,y),m(y,v),m(i,x),$(t,w,a),j(b,t,a),T=!0},p(t,[e]){const n={};11&e&&(n.$$scope={dirty:e,ctx:t}),b.$set(n)},i(t){T||(M(b.$$.fragment,t),T=!0)},o(t){A(b.$$.fragment,t),T=!1},d(t){t&&u(e),t&&u(s),t&&u(i),t&&u(w),H(b,t)}}}async function ft({fetch:t}){const e=await t("/homeautomation/structure.json");return{props:{data:await e.json()}}}function gt(t,e,n){let s,{data:a}=e;return t.$$set=t=>{"data"in t&&n(0,a=t.data)},[a,s,function(){s=this.clientWidth,n(1,s)}]}class $t extends t{constructor(t){super(),e(this,t,gt,dt,n,{data:0})}}export{$t as default,ft as load};
