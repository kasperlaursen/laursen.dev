import{S as t,i as e,s as n,P as s,e as a,t as r,k as o,Q as i,a as l,c,g as h,d as u,n as d,b as g,F as f,L as $,f as p,D as m,R as y,h as v,T as x,l as b,E as w,O as k,j as E,m as j,o as M,x as A,u as H,v as T,U as L,A as S,V as z,W as X,X as Y,Y as D,Z as I,_ as V,$ as O,a0 as B,a1 as N,a2 as P,H as R,I as W,J as F,K as J,a3 as K,a4 as Q}from"../../chunks/vendor-4c629592.js";function U(t,e,n){const s=t.slice();return s[7]=e[n],s}function Z(t){let e,n,b,w,k,E,j,M,A,H,T,L,S,z=t[7].data.name+"",X=t[7].data.count?" ("+t[7].data.count+")":"";function Y(){return t[5](t[7])}function D(){return t[6](t[7])}return{c(){e=s("foreignObject"),n=a("div"),b=a("a"),w=r(z),k=r(X),j=o(),this.h()},l(t){e=i(t,"foreignObject",{id:!0,x:!0,y:!0,height:!0,width:!0,class:!0});var s=l(e);n=c(s,"DIV",{class:!0});var a=l(n);b=c(a,"A",{href:!0,class:!0});var r=l(b);w=h(r,z),k=h(r,X),r.forEach(u),j=d(a),a.forEach(u),s.forEach(u),this.h()},h(){var s;g(b,"href",E=t[7].data.url),g(b,"class","svelte-1002xw0"),g(n,"class","svelte-1002xw0"),g(e,"id",M=t[7].data.id),g(e,"x",A=t[7].x?t[7].x-t[1]/2:0),g(e,"y",H=t[7].y?t[7].y-t[1]/2:0),g(e,"height",t[1]),g(e,"width",t[1]),g(e,"class",T=f(`circle ${null!=(s=t[4][t[7].data.color])?s:"bg-gray-600"}`)+" svelte-1002xw0"),$(e,"highlight",t[7].data.highlight)},m(t,s){p(t,e,s),m(e,n),m(n,b),m(b,w),m(b,k),m(n,j),L||(S=[y(e,"mouseenter",Y),y(e,"mouseleave",D)],L=!0)},p(n,s){var a;t=n,1&s&&z!==(z=t[7].data.name+"")&&v(w,z),1&s&&X!==(X=t[7].data.count?" ("+t[7].data.count+")":"")&&v(k,X),1&s&&E!==(E=t[7].data.url)&&g(b,"href",E),1&s&&M!==(M=t[7].data.id)&&g(e,"id",M),3&s&&A!==(A=t[7].x?t[7].x-t[1]/2:0)&&g(e,"x",A),3&s&&H!==(H=t[7].y?t[7].y-t[1]/2:0)&&g(e,"y",H),2&s&&g(e,"height",t[1]),2&s&&g(e,"width",t[1]),1&s&&T!==(T=f(`circle ${null!=(a=t[4][t[7].data.color])?a:"bg-gray-600"}`)+" svelte-1002xw0")&&g(e,"class",T),1&s&&$(e,"highlight",t[7].data.highlight)},d(t){t&&u(e),L=!1,x(S)}}}function _(t){let e,n=t[0],s=[];for(let a=0;a<n.length;a+=1)s[a]=Z(U(t,n,a));return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=b()},l(t){for(let e=0;e<s.length;e+=1)s[e].l(t);e=b()},m(t,n){for(let e=0;e<s.length;e+=1)s[e].m(t,n);p(t,e,n)},p(t,[a]){if(31&a){let r;for(n=t[0],r=0;r<n.length;r+=1){const o=U(t,n,r);s[r]?s[r].p(o,a):(s[r]=Z(o),s[r].c(),s[r].m(e.parentNode,e))}for(;r<s.length;r+=1)s[r].d(1);s.length=n.length}},i:w,o:w,d(t){k(s,t),t&&u(e)}}}function q(t,e,n){let{nodes:s}=e,{nodeSize:a}=e,{onMouseEnter:r}=e,{onMouseLeave:o}=e;return t.$$set=t=>{"nodes"in t&&n(0,s=t.nodes),"nodeSize"in t&&n(1,a=t.nodeSize),"onMouseEnter"in t&&n(2,r=t.onMouseEnter),"onMouseLeave"in t&&n(3,o=t.onMouseLeave)},[s,a,r,o,{gray:"bg-gray-600",red:"bg-red-600",yellow:"bg-yellow-600",green:"bg-green-600",blue:"bg-blue-600",indigo:"bg-indigo-600",purple:"bg-purple-600",pink:"bg-pink-600"},t=>r(t),t=>o(t)]}class C extends t{constructor(t){super(),e(this,t,q,_,n,{nodes:0,nodeSize:1,onMouseEnter:2,onMouseLeave:3})}}function G(t,e,n){const s=t.slice();return s[1]=e[n],s}function tt(t){let e,n,a,r,o,c;return{c(){e=s("g"),n=s("line"),this.h()},l(t){e=i(t,"g",{stroke:!0,"stroke-opacity":!0});var s=l(e);n=i(s,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),l(n).forEach(u),s.forEach(u),this.h()},h(){g(n,"x1",a=t[1].source.x),g(n,"y1",r=t[1].source.y),g(n,"x2",o=t[1].target.x),g(n,"y2",c=t[1].target.y),g(e,"stroke","#999"),g(e,"stroke-opacity","0.6")},m(t,s){p(t,e,s),m(e,n)},p(t,e){1&e&&a!==(a=t[1].source.x)&&g(n,"x1",a),1&e&&r!==(r=t[1].source.y)&&g(n,"y1",r),1&e&&o!==(o=t[1].target.x)&&g(n,"x2",o),1&e&&c!==(c=t[1].target.y)&&g(n,"y2",c)},d(t){t&&u(e)}}}function et(t){let e,n=t[0],s=[];for(let a=0;a<n.length;a+=1)s[a]=tt(G(t,n,a));return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=b()},l(t){for(let e=0;e<s.length;e+=1)s[e].l(t);e=b()},m(t,n){for(let e=0;e<s.length;e+=1)s[e].m(t,n);p(t,e,n)},p(t,[a]){if(1&a){let r;for(n=t[0],r=0;r<n.length;r+=1){const o=G(t,n,r);s[r]?s[r].p(o,a):(s[r]=tt(o),s[r].c(),s[r].m(e.parentNode,e))}for(;r<s.length;r+=1)s[r].d(1);s.length=n.length}},i:w,o:w,d(t){k(s,t),t&&u(e)}}}function nt(t,e,n){let{links:s}=e;return t.$$set=t=>{"links"in t&&n(0,s=t.links)},[s]}class st extends t{constructor(t){super(),e(this,t,nt,et,n,{links:0})}}function at(t){let e,n,a,r;return n=new st({props:{links:t[2]}}),a=new C({props:{nodes:t[3],nodeSize:ot,onMouseEnter:t[4],onMouseLeave:t[5]}}),{c(){e=s("svg"),E(n.$$.fragment),E(a.$$.fragment),this.h()},l(t){e=i(t,"svg",{height:!0,width:!0});var s=l(e);j(n.$$.fragment,s),j(a.$$.fragment,s),s.forEach(u),this.h()},h(){g(e,"height",rt),g(e,"width",t[0])},m(s,o){p(s,e,o),M(n,e,null),M(a,e,null),t[8](e),r=!0},p(t,[s]){const o={};4&s&&(o.links=t[2]),n.$set(o);const i={};8&s&&(i.nodes=t[3]),a.$set(i),(!r||1&s)&&g(e,"width",t[0])},i(t){r||(A(n.$$.fragment,t),A(a.$$.fragment,t),r=!0)},o(t){H(n.$$.fragment,t),H(a.$$.fragment,t),r=!1},d(s){s&&u(e),T(n),T(a),t[8](null)}}}let rt=700;const ot=80;function it(t,e,n){let s,a,r,{data:o={name:"Home Assistant",children:[{}]}}=e,{width:i}=e;const l=ot/2,c=L(o);let h,u=N;function d(t){const e=h.find(u.invertX(t.x),u.invertY(t.y),l);return e&&(e.x=u.applyX(e.x),e.y=u.applyY(e.y)),e}function g(){h.tick(),n(3,a=[...a]),n(2,s=[...s])}function f(t){t.active||h.alphaTarget(.3).restart(),t.subject.fx=u.invertX(t.subject.x),t.subject.fy=u.invertY(t.subject.y)}function $(t){t.subject.fx=u.invertX(t.x),t.subject.fy=u.invertY(t.y)}function p(t){t.active||h.alphaTarget(0),t.subject.fx=null,t.subject.fy=null}return S((()=>{n(7,h=z(a).force("link",X(s).id((t=>t.id)).distance(ot).strength(.5)).force("charge",Y().strength(-300)).force("collide",D(ot/2).strength(.4)).force("center",I(i/2,rt/2).strength(.5)).force("y",V(rt/2).strength(.06)).on("tick",g)),O(r).call(B().container(r).subject(d).on("start",f).on("drag",$).on("end",p))})),t.$$set=t=>{"data"in t&&n(6,o=t.data),"width"in t&&n(0,i=t.width)},t.$$.update=()=>{129&t.$$.dirty&&(null==h||h.force("center",I(i/2,rt/2).strength(.5)))},n(2,s=c.links()),n(3,a=c.descendants()),[i,r,s,a,function t(e){console.log(O("#"+e.data.id)),O("#"+e.data.id).classed("highlight",!0),e.children&&e.children.forEach(t)},function t(e){O("#"+e.data.id).classed("highlight",!1),e.children&&e.children.forEach(t)},o,h,function(t){P[t?"unshift":"push"]((()=>{r=t,n(1,r)}))}]}class lt extends t{constructor(t){super(),e(this,t,it,at,n,{data:6,width:0})}}function ct(t){let e,n,s;const r=t[3].default,o=R(r,t,t[2],null);return{c(){e=a("div"),o&&o.c(),this.h()},l(t){e=c(t,"DIV",{style:!0,class:!0});var n=l(e);o&&o.l(n),n.forEach(u),this.h()},h(){g(e,"style",n=`--spacing: ${t[1][t[0]]}`),g(e,"class","svelte-oj3i7l")},m(t,n){p(t,e,n),o&&o.m(e,null),s=!0},p(t,[a]){o&&o.p&&(!s||4&a)&&W(o,r,t,t[2],s?J(r,t[2],a,null):F(t[2]),null),(!s||1&a&&n!==(n=`--spacing: ${t[1][t[0]]}`))&&g(e,"style",n)},i(t){s||(A(o,t),s=!0)},o(t){H(o,t),s=!1},d(t){t&&u(e),o&&o.d(t)}}}function ht(t,e,n){let{$$slots:s={},$$scope:a}=e,{spacing:r="large"}=e;return t.$$set=t=>{"spacing"in t&&n(0,r=t.spacing),"$$scope"in t&&n(2,a=t.$$scope)},[r,{none:"0",small:"1em",medium:"2em",large:"3em"},a,s]}class ut extends t{constructor(t){super(),e(this,t,ht,ct,n,{spacing:0})}}function dt(t){let e,n,s,r;return n=new lt({props:{data:t[0],width:t[1]}}),{c(){e=a("div"),E(n.$$.fragment),this.h()},l(t){e=c(t,"DIV",{});var s=l(e);j(n.$$.fragment,s),s.forEach(u),this.h()},h(){K((()=>t[2].call(e)))},m(a,o){p(a,e,o),M(n,e,null),s=Q(e,t[2].bind(e)),r=!0},p(t,e){const s={};1&e&&(s.data=t[0]),2&e&&(s.width=t[1]),n.$set(s)},i(t){r||(A(n.$$.fragment,t),r=!0)},o(t){H(n.$$.fragment,t),r=!1},d(t){t&&u(e),T(n),s()}}}function gt(t){let e,n,s,i,g,f,$,y,v,x,b,w,k;return w=new ut({props:{spacing:"none",$$slots:{default:[dt]},$$scope:{ctx:t}}}),{c(){e=a("h1"),n=r("Home Automation"),s=o(),i=a("p"),g=r("Thanks for visiting. "),f=a("br"),$=r("\n\tThis page is still a "),y=a("b"),v=r("work in progress"),x=r(", but below you see a diagram of my Home Automation\n\tsetup!"),b=o(),E(w.$$.fragment)},l(t){e=c(t,"H1",{});var a=l(e);n=h(a,"Home Automation"),a.forEach(u),s=d(t),i=c(t,"P",{});var r=l(i);g=h(r,"Thanks for visiting. "),f=c(r,"BR",{}),$=h(r,"\n\tThis page is still a "),y=c(r,"B",{});var o=l(y);v=h(o,"work in progress"),o.forEach(u),x=h(r,", but below you see a diagram of my Home Automation\n\tsetup!"),r.forEach(u),b=d(t),j(w.$$.fragment,t)},m(t,a){p(t,e,a),m(e,n),p(t,s,a),p(t,i,a),m(i,g),m(i,f),m(i,$),m(i,y),m(y,v),m(i,x),p(t,b,a),M(w,t,a),k=!0},p(t,[e]){const n={};11&e&&(n.$$scope={dirty:e,ctx:t}),w.$set(n)},i(t){k||(A(w.$$.fragment,t),k=!0)},o(t){H(w.$$.fragment,t),k=!1},d(t){t&&u(e),t&&u(s),t&&u(i),t&&u(b),T(w,t)}}}async function ft({fetch:t}){const e=await t("/homeautomation/structure.json");return{props:{data:await e.json()}}}function $t(t,e,n){let s,{data:a}=e;return t.$$set=t=>{"data"in t&&n(0,a=t.data)},[a,s,function(){s=this.clientWidth,n(1,s)}]}class pt extends t{constructor(t){super(),e(this,t,$t,gt,n,{data:0})}}export{pt as default,ft as load};
