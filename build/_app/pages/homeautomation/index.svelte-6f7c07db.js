import{S as t,i as e,s as n,P as s,e as a,t as o,k as r,c as i,a as c,g as l,d as h,n as u,b as d,L as f,f as g,D as $,Q as m,h as p,R as y,l as v,E as x,O as w,j as b,m as k,o as E,x as j,u as M,v as A,T as H,A as T,U as L,V as S,W as z,X,Y,Z as D,_ as I,$ as V,a0 as O,a1 as B,H as N,I as P,J as R,K as W,a2 as J,a3 as K}from"../../chunks/vendor-0956159f.js";function Q(t,e,n){const s=t.slice();return s[6]=e[n],s}function U(t){let e,n,v,x,w,b,k,E,j,M,A,H,T,L=t[6].data.name+"",S=t[6].data.count?" ("+t[6].data.count+")":"";function z(){return t[4](t[6])}function X(){return t[5](t[6])}return{c(){e=s("foreignObject"),n=a("div"),v=a("a"),x=o(L),w=o(S),k=r(),this.h()},l(t){e=i(t,"foreignObject",{id:!0,x:!0,y:!0,height:!0,width:!0,class:!0,style:!0},1);var s=c(e);n=i(s,"DIV",{class:!0});var a=c(n);v=i(a,"A",{href:!0,class:!0});var o=c(v);x=l(o,L),w=l(o,S),o.forEach(h),k=u(a),a.forEach(h),s.forEach(h),this.h()},h(){var s;d(v,"href",b=t[6].data.url),d(v,"class","svelte-13dvywg"),d(n,"class","svelte-13dvywg"),d(e,"id",E=t[6].data.id),d(e,"x",j=t[6].x?t[6].x-t[1]/2:0),d(e,"y",M=t[6].y?t[6].y-t[1]/2:0),d(e,"height",t[1]),d(e,"width",t[1]),d(e,"class","circle svelte-13dvywg"),d(e,"style",A=`--element-bg-color: var(${null!=(s=t[6].data.color)?s:"--gray"})`),f(e,"highlight",t[6].data.highlight)},m(t,s){g(t,e,s),$(e,n),$(n,v),$(v,x),$(v,w),$(n,k),H||(T=[m(e,"mouseenter",z),m(e,"mouseleave",X)],H=!0)},p(n,s){var a;t=n,1&s&&L!==(L=t[6].data.name+"")&&p(x,L),1&s&&S!==(S=t[6].data.count?" ("+t[6].data.count+")":"")&&p(w,S),1&s&&b!==(b=t[6].data.url)&&d(v,"href",b),1&s&&E!==(E=t[6].data.id)&&d(e,"id",E),3&s&&j!==(j=t[6].x?t[6].x-t[1]/2:0)&&d(e,"x",j),3&s&&M!==(M=t[6].y?t[6].y-t[1]/2:0)&&d(e,"y",M),2&s&&d(e,"height",t[1]),2&s&&d(e,"width",t[1]),1&s&&A!==(A=`--element-bg-color: var(${null!=(a=t[6].data.color)?a:"--gray"})`)&&d(e,"style",A),1&s&&f(e,"highlight",t[6].data.highlight)},d(t){t&&h(e),H=!1,y(T)}}}function Z(t){let e,n=t[0],s=[];for(let a=0;a<n.length;a+=1)s[a]=U(Q(t,n,a));return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=v()},l(t){for(let e=0;e<s.length;e+=1)s[e].l(t);e=v()},m(t,n){for(let e=0;e<s.length;e+=1)s[e].m(t,n);g(t,e,n)},p(t,[a]){if(15&a){let o;for(n=t[0],o=0;o<n.length;o+=1){const r=Q(t,n,o);s[o]?s[o].p(r,a):(s[o]=U(r),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},i:x,o:x,d(t){w(s,t),t&&h(e)}}}function _(t,e,n){let{nodes:s}=e,{nodeSize:a}=e,{onMouseEnter:o}=e,{onMouseLeave:r}=e;return t.$$set=t=>{"nodes"in t&&n(0,s=t.nodes),"nodeSize"in t&&n(1,a=t.nodeSize),"onMouseEnter"in t&&n(2,o=t.onMouseEnter),"onMouseLeave"in t&&n(3,r=t.onMouseLeave)},[s,a,o,r,t=>o(t),t=>r(t)]}class q extends t{constructor(t){super(),e(this,t,_,Z,n,{nodes:0,nodeSize:1,onMouseEnter:2,onMouseLeave:3})}}function C(t,e,n){const s=t.slice();return s[1]=e[n],s}function F(t){let e,n,a,o,r,l;return{c(){e=s("g"),n=s("line"),this.h()},l(t){e=i(t,"g",{stroke:!0,"stroke-opacity":!0},1);var s=c(e);n=i(s,"line",{x1:!0,y1:!0,x2:!0,y2:!0},1),c(n).forEach(h),s.forEach(h),this.h()},h(){d(n,"x1",a=t[1].source.x),d(n,"y1",o=t[1].source.y),d(n,"x2",r=t[1].target.x),d(n,"y2",l=t[1].target.y),d(e,"stroke","#999"),d(e,"stroke-opacity","0.6")},m(t,s){g(t,e,s),$(e,n)},p(t,e){1&e&&a!==(a=t[1].source.x)&&d(n,"x1",a),1&e&&o!==(o=t[1].source.y)&&d(n,"y1",o),1&e&&r!==(r=t[1].target.x)&&d(n,"x2",r),1&e&&l!==(l=t[1].target.y)&&d(n,"y2",l)},d(t){t&&h(e)}}}function G(t){let e,n=t[0],s=[];for(let a=0;a<n.length;a+=1)s[a]=F(C(t,n,a));return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=v()},l(t){for(let e=0;e<s.length;e+=1)s[e].l(t);e=v()},m(t,n){for(let e=0;e<s.length;e+=1)s[e].m(t,n);g(t,e,n)},p(t,[a]){if(1&a){let o;for(n=t[0],o=0;o<n.length;o+=1){const r=C(t,n,o);s[o]?s[o].p(r,a):(s[o]=F(r),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}},i:x,o:x,d(t){w(s,t),t&&h(e)}}}function tt(t,e,n){let{links:s}=e;return t.$$set=t=>{"links"in t&&n(0,s=t.links)},[s]}class et extends t{constructor(t){super(),e(this,t,tt,G,n,{links:0})}}function nt(t){let e,n,a,o;return n=new et({props:{links:t[2]}}),a=new q({props:{nodes:t[3],nodeSize:at,onMouseEnter:t[4],onMouseLeave:t[5]}}),{c(){e=s("svg"),b(n.$$.fragment),b(a.$$.fragment),this.h()},l(t){e=i(t,"svg",{height:!0,width:!0},1);var s=c(e);k(n.$$.fragment,s),k(a.$$.fragment,s),s.forEach(h),this.h()},h(){d(e,"height",st),d(e,"width",t[0])},m(s,r){g(s,e,r),E(n,e,null),E(a,e,null),t[8](e),o=!0},p(t,[s]){const r={};4&s&&(r.links=t[2]),n.$set(r);const i={};8&s&&(i.nodes=t[3]),a.$set(i),(!o||1&s)&&d(e,"width",t[0])},i(t){o||(j(n.$$.fragment,t),j(a.$$.fragment,t),o=!0)},o(t){M(n.$$.fragment,t),M(a.$$.fragment,t),o=!1},d(s){s&&h(e),A(n),A(a),t[8](null)}}}let st=700;const at=80;function ot(t,e,n){let s,a,o,{data:r={name:"Home Assistant",children:[{}]}}=e,{width:i}=e;const c=at/2,l=H(r);let h,u=O;function d(t){const e=h.find(u.invertX(t.x),u.invertY(t.y),c);return e&&(e.x=u.applyX(e.x),e.y=u.applyY(e.y)),e}function f(){h.tick(),n(3,a=[...a]),n(2,s=[...s])}function g(t){t.active||h.alphaTarget(.3).restart(),t.subject.fx=u.invertX(t.subject.x),t.subject.fy=u.invertY(t.subject.y)}function $(t){t.subject.fx=u.invertX(t.x),t.subject.fy=u.invertY(t.y)}function m(t){t.active||h.alphaTarget(0),t.subject.fx=null,t.subject.fy=null}return T((()=>{n(7,h=L(a).force("link",S(s).id((t=>t.id)).distance(at).strength(.5)).force("charge",z().strength(-300)).force("collide",X(at/2).strength(.4)).force("center",Y(i/2,st/2).strength(.5)).force("y",D(st/2).strength(.06)).on("tick",f)),I(o).call(V().container(o).subject(d).on("start",g).on("drag",$).on("end",m))})),t.$$set=t=>{"data"in t&&n(6,r=t.data),"width"in t&&n(0,i=t.width)},t.$$.update=()=>{129&t.$$.dirty&&(null==h||h.force("center",Y(i/2,st/2).strength(.5)))},n(2,s=l.links()),n(3,a=l.descendants()),[i,o,s,a,function t(e){console.log(I("#"+e.data.id)),I("#"+e.data.id).classed("highlight",!0),e.children&&e.children.forEach(t)},function t(e){I("#"+e.data.id).classed("highlight",!1),e.children&&e.children.forEach(t)},r,h,function(t){B[t?"unshift":"push"]((()=>{o=t,n(1,o)}))}]}class rt extends t{constructor(t){super(),e(this,t,ot,nt,n,{data:6,width:0})}}function it(t){let e,n,s;const o=t[3].default,r=N(o,t,t[2],null);return{c(){e=a("div"),r&&r.c(),this.h()},l(t){e=i(t,"DIV",{style:!0,class:!0});var n=c(e);r&&r.l(n),n.forEach(h),this.h()},h(){d(e,"style",n=`--spacing: ${t[1][t[0]]}`),d(e,"class","svelte-e7cenx")},m(t,n){g(t,e,n),r&&r.m(e,null),s=!0},p(t,[a]){r&&r.p&&(!s||4&a)&&P(r,o,t,t[2],s?W(o,t[2],a,null):R(t[2]),null),(!s||1&a&&n!==(n=`--spacing: ${t[1][t[0]]}`))&&d(e,"style",n)},i(t){s||(j(r,t),s=!0)},o(t){M(r,t),s=!1},d(t){t&&h(e),r&&r.d(t)}}}function ct(t,e,n){let{$$slots:s={},$$scope:a}=e,{spacing:o="large"}=e;return t.$$set=t=>{"spacing"in t&&n(0,o=t.spacing),"$$scope"in t&&n(2,a=t.$$scope)},[o,{none:"0",small:"1em",medium:"2em",large:"3em"},a,s]}class lt extends t{constructor(t){super(),e(this,t,ct,it,n,{spacing:0})}}function ht(t){let e,n,s,o;return n=new rt({props:{data:t[0],width:t[1]}}),{c(){e=a("div"),b(n.$$.fragment),this.h()},l(t){e=i(t,"DIV",{});var s=c(e);k(n.$$.fragment,s),s.forEach(h),this.h()},h(){J((()=>t[2].call(e)))},m(a,r){g(a,e,r),E(n,e,null),s=K(e,t[2].bind(e)),o=!0},p(t,e){const s={};1&e&&(s.data=t[0]),2&e&&(s.width=t[1]),n.$set(s)},i(t){o||(j(n.$$.fragment,t),o=!0)},o(t){M(n.$$.fragment,t),o=!1},d(t){t&&h(e),A(n),s()}}}function ut(t){let e,n,s,d,f,m,p,y,v,x,w,H,T;return H=new lt({props:{spacing:"none",$$slots:{default:[ht]},$$scope:{ctx:t}}}),{c(){e=a("h1"),n=o("Home Automation"),s=r(),d=a("p"),f=o("Thanks for visiting. "),m=a("br"),p=o("\n\tThis page is still a "),y=a("b"),v=o("work in progress"),x=o(", but below you see a diagram of my Home Automation\n\tsetup!"),w=r(),b(H.$$.fragment)},l(t){e=i(t,"H1",{});var a=c(e);n=l(a,"Home Automation"),a.forEach(h),s=u(t),d=i(t,"P",{});var o=c(d);f=l(o,"Thanks for visiting. "),m=i(o,"BR",{}),p=l(o,"\n\tThis page is still a "),y=i(o,"B",{});var r=c(y);v=l(r,"work in progress"),r.forEach(h),x=l(o,", but below you see a diagram of my Home Automation\n\tsetup!"),o.forEach(h),w=u(t),k(H.$$.fragment,t)},m(t,a){g(t,e,a),$(e,n),g(t,s,a),g(t,d,a),$(d,f),$(d,m),$(d,p),$(d,y),$(y,v),$(d,x),g(t,w,a),E(H,t,a),T=!0},p(t,[e]){const n={};11&e&&(n.$$scope={dirty:e,ctx:t}),H.$set(n)},i(t){T||(j(H.$$.fragment,t),T=!0)},o(t){M(H.$$.fragment,t),T=!1},d(t){t&&h(e),t&&h(s),t&&h(d),t&&h(w),A(H,t)}}}async function dt({fetch:t}){const e=await t("/homeautomation/structure.json");return{props:{data:await e.json()}}}function ft(t,e,n){let s,{data:a}=e;return t.$$set=t=>{"data"in t&&n(0,a=t.data)},[a,s,function(){s=this.clientWidth,n(1,s)}]}class gt extends t{constructor(t){super(),e(this,t,ft,ut,n,{data:0})}}export{gt as default,dt as load};
