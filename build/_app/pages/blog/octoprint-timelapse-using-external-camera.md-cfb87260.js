import{S as e,i as a,s as t,k as o,e as r,t as n,N as s,d as c,n as i,c as l,a as p,g as h,b as d,M as u,f,D as g,E}from"../../chunks/vendor-d4c6ea5c.js";function m(e){let a,t,m,v,w,P,b,D,C,I,O,R,k,x,S,T,L,H,M,N,U,A,B,Y,q,V,W,j,G,K,z,F,J,Q,X,Z,$,_,ee,ae,te,oe,re,ne,se,ce,ie,le,pe,he,de,ue,fe,ge,Ee,me,ve,ye,we,Pe,be,De,Ce,Ie,Oe,Re,ke,xe,Se,Te,Le,He,Me,Ne,Ue,Ae,Be,Ye,qe,Ve,We,je,Ge,Ke,ze,Fe,Je,Qe,Xe,Ze,$e,_e,ea,aa,ta,oa,ra,na,sa,ca,ia,la,pa,ha,da,ua,fa,ga,Ea,ma,va,ya,wa,Pa,ba,Da,Ca,Ia,Oa,Ra,ka,xa,Sa,Ta,La,Ha,Ma,Na,Ua,Aa,Ba,Ya,qa,Va,Wa,ja,Ga,Ka,za,Fa,Ja,Qa,Xa,Za,$a,_a,et,at,tt,ot,rt,nt,st,ct,it,lt,pt,ht,dt,ut,ft,gt,Et,mt,vt;return document.title=a=y+" | Kasper Laursen",{c(){t=o(),m=r("h1"),v=n("Using an external camera in octoprint"),w=o(),P=r("p"),b=n("Even tho I have a pi cam connected to my octopint, I wanted to make higher quality timelapses."),D=r("br"),C=n("\nTo make that happen, I found my old Canon EOS 600D."),I=r("br"),O=n("\nWe are going to be using gphoto2 to interface with the camera, "),R=r("a"),k=n("you can find a list of supproted cameras here"),x=n("."),S=o(),T=r("section"),L=r("div"),H=r("h3"),M=n("Octolapse + DSLR"),N=o(),U=r("video"),A=r("source"),Y=n("\n        Your browser does not support the video tag."),q=o(),V=r("div"),W=r("h3"),j=n("Default + pi camera"),G=o(),K=r("video"),z=r("source"),J=n("\n        Your browser does not support the video tag."),Q=o(),X=r("p"),Z=n("Okay lets get started on setting it all up."),$=o(),_=r("p"),ee=n("I assume that you already have octoprint running on a PI connected to your 3D printer."),ae=r("br"),te=n("\nIf not, follow the "),oe=r("a"),re=n("official documentation"),ne=n("."),se=o(),ce=r("p"),ie=n("We need to connect to the pi via ssh to install gphoto2."),le=r("br"),pe=n("\nIf you did not enable ssh on installation you can do so by adding an empty file named "),he=r("code"),de=n("ssh"),ue=n(" (no extnesion) to to root of the SD Card."),fe=o(),ge=r("p"),Ee=n("Now open a terminal and follow the steps below."),me=o(),ve=r("p"),ye=n("Connect to the PI via ssh"),we=o(),Pe=r("pre"),be=o(),De=r("p"),Ce=n("(Default pasword is "),Ie=r("code"),Oe=n("raspberry"),Re=n(")"),ke=o(),xe=r("p"),Se=n("Install gphoto2"),Te=o(),Le=r("pre"),He=o(),Me=r("p"),Ne=n("Now connect the camera to the PI and test gphoto2"),Ue=o(),Ae=r("pre"),Be=o(),Ye=r("small"),qe=n("You should see your camera model listed"),Ve=o(),We=r("p"),je=n("Take a picture"),Ge=o(),Ke=r("pre"),ze=o(),Fe=r("p"),Je=n("Navigate to the script folder"),Qe=o(),Xe=r("pre"),Ze=o(),$e=r("p"),_e=n("Create a new script to take a picture"),ea=o(),aa=r("pre"),ta=o(),oa=r("p"),ra=n("Add the following to the file:"),na=o(),sa=r("pre"),ca=o(),ia=r("p"),la=n("press "),pa=r("code"),ha=n("crtl+O"),da=n(" then "),ua=r("code"),fa=n("enter"),ga=n(" and then "),Ea=r("code"),ma=n("ctrl+x"),va=n(" and "),ya=r("code"),wa=n("enter"),Pa=n(" to save the file."),ba=o(),Da=r("p"),Ca=n("Add execute permission to the script"),Ia=o(),Oa=r("pre"),Ra=o(),ka=r("p"),xa=n("Now try to take a picture using the script"),Sa=o(),Ta=r("pre"),La=o(),Ha=r("p"),Ma=n("Now lets setup octolapse in octoprint to use the script."),Na=r("br"),Ua=n("\nIf you have not already, install the octolapse plugin through the plugin manager in the octoprint UI.\nAfter installing configure your printer (or use a preset)."),Aa=o(),Ba=r("p"),Ya=n("Go to "),qa=r("code"),Va=n("octolapse"),Wa=n(" -> "),ja=r("code"),Ga=n("cameras"),Ka=n(" -> "),za=r("code"),Fa=n("Add profile"),Ja=n("."),Qa=r("br"),Xa=n("\nUnder "),Za=r("code"),$a=n("Camera Type"),_a=n(" select "),et=r("code"),at=n("External Camera - Script"),tt=n("."),ot=r("br"),rt=n("\nThen under "),nt=r("code"),st=n("External Camera Setup - Script"),ct=n(" add the path to the snapshot.sh file"),it=o(),lt=r("pre"),pt=o(),ht=r("p"),dt=n("Use the test button to make sure it works."),ut=o(),ft=r("p"),gt=n("Scroll to the bottom of the window and save the settings."),Et=o(),mt=r("p"),vt=n("Under the octolaps tab you can now select your new camera and it will take a picture on each layer!"),this.h()},l(e){s('[data-svelte="svelte-j5qq73"]',document.head).forEach(c),t=i(e),m=l(e,"H1",{});var a=p(m);v=h(a,"Using an external camera in octoprint"),a.forEach(c),w=i(e),P=l(e,"P",{});var o=p(P);b=h(o,"Even tho I have a pi cam connected to my octopint, I wanted to make higher quality timelapses."),D=l(o,"BR",{}),C=h(o,"\nTo make that happen, I found my old Canon EOS 600D."),I=l(o,"BR",{}),O=h(o,"\nWe are going to be using gphoto2 to interface with the camera, "),R=l(o,"A",{href:!0,rel:!0});var r=p(R);k=h(r,"you can find a list of supproted cameras here"),r.forEach(c),x=h(o,"."),o.forEach(c),S=i(e),T=l(e,"SECTION",{class:!0});var n=p(T);L=l(n,"DIV",{class:!0});var d=p(L);H=l(d,"H3",{});var u=p(H);M=h(u,"Octolapse + DSLR"),u.forEach(c),N=i(d),U=l(d,"VIDEO",{class:!0});var f=p(U);A=l(f,"SOURCE",{src:!0,type:!0}),Y=h(f,"\n        Your browser does not support the video tag."),f.forEach(c),d.forEach(c),q=i(n),V=l(n,"DIV",{class:!0});var g=p(V);W=l(g,"H3",{});var E=p(W);j=h(E,"Default + pi camera"),E.forEach(c),G=i(g),K=l(g,"VIDEO",{class:!0});var y=p(K);z=l(y,"SOURCE",{src:!0,type:!0}),J=h(y,"\n        Your browser does not support the video tag."),y.forEach(c),g.forEach(c),n.forEach(c),Q=i(e),X=l(e,"P",{});var B=p(X);Z=h(B,"Okay lets get started on setting it all up."),B.forEach(c),$=i(e),_=l(e,"P",{});var F=p(_);ee=h(F,"I assume that you already have octoprint running on a PI connected to your 3D printer."),ae=l(F,"BR",{}),te=h(F,"\nIf not, follow the "),oe=l(F,"A",{href:!0,rel:!0});var yt=p(oe);re=h(yt,"official documentation"),yt.forEach(c),ne=h(F,"."),F.forEach(c),se=i(e),ce=l(e,"P",{});var wt=p(ce);ie=h(wt,"We need to connect to the pi via ssh to install gphoto2."),le=l(wt,"BR",{}),pe=h(wt,"\nIf you did not enable ssh on installation you can do so by adding an empty file named "),he=l(wt,"CODE",{});var Pt=p(he);de=h(Pt,"ssh"),Pt.forEach(c),ue=h(wt," (no extnesion) to to root of the SD Card."),wt.forEach(c),fe=i(e),ge=l(e,"P",{});var bt=p(ge);Ee=h(bt,"Now open a terminal and follow the steps below."),bt.forEach(c),me=i(e),ve=l(e,"P",{});var Dt=p(ve);ye=h(Dt,"Connect to the PI via ssh"),Dt.forEach(c),we=i(e),Pe=l(e,"PRE",{class:!0}),p(Pe).forEach(c),be=i(e),De=l(e,"P",{});var Ct=p(De);Ce=h(Ct,"(Default pasword is "),Ie=l(Ct,"CODE",{});var It=p(Ie);Oe=h(It,"raspberry"),It.forEach(c),Re=h(Ct,")"),Ct.forEach(c),ke=i(e),xe=l(e,"P",{});var Ot=p(xe);Se=h(Ot,"Install gphoto2"),Ot.forEach(c),Te=i(e),Le=l(e,"PRE",{class:!0}),p(Le).forEach(c),He=i(e),Me=l(e,"P",{});var Rt=p(Me);Ne=h(Rt,"Now connect the camera to the PI and test gphoto2"),Rt.forEach(c),Ue=i(e),Ae=l(e,"PRE",{class:!0}),p(Ae).forEach(c),Be=i(e),Ye=l(e,"SMALL",{});var kt=p(Ye);qe=h(kt,"You should see your camera model listed"),kt.forEach(c),Ve=i(e),We=l(e,"P",{});var xt=p(We);je=h(xt,"Take a picture"),xt.forEach(c),Ge=i(e),Ke=l(e,"PRE",{class:!0}),p(Ke).forEach(c),ze=i(e),Fe=l(e,"P",{});var St=p(Fe);Je=h(St,"Navigate to the script folder"),St.forEach(c),Qe=i(e),Xe=l(e,"PRE",{class:!0}),p(Xe).forEach(c),Ze=i(e),$e=l(e,"P",{});var Tt=p($e);_e=h(Tt,"Create a new script to take a picture"),Tt.forEach(c),ea=i(e),aa=l(e,"PRE",{class:!0}),p(aa).forEach(c),ta=i(e),oa=l(e,"P",{});var Lt=p(oa);ra=h(Lt,"Add the following to the file:"),Lt.forEach(c),na=i(e),sa=l(e,"PRE",{class:!0}),p(sa).forEach(c),ca=i(e),ia=l(e,"P",{});var Ht=p(ia);la=h(Ht,"press "),pa=l(Ht,"CODE",{});var Mt=p(pa);ha=h(Mt,"crtl+O"),Mt.forEach(c),da=h(Ht," then "),ua=l(Ht,"CODE",{});var Nt=p(ua);fa=h(Nt,"enter"),Nt.forEach(c),ga=h(Ht," and then "),Ea=l(Ht,"CODE",{});var Ut=p(Ea);ma=h(Ut,"ctrl+x"),Ut.forEach(c),va=h(Ht," and "),ya=l(Ht,"CODE",{});var At=p(ya);wa=h(At,"enter"),At.forEach(c),Pa=h(Ht," to save the file."),Ht.forEach(c),ba=i(e),Da=l(e,"P",{});var Bt=p(Da);Ca=h(Bt,"Add execute permission to the script"),Bt.forEach(c),Ia=i(e),Oa=l(e,"PRE",{class:!0}),p(Oa).forEach(c),Ra=i(e),ka=l(e,"P",{});var Yt=p(ka);xa=h(Yt,"Now try to take a picture using the script"),Yt.forEach(c),Sa=i(e),Ta=l(e,"PRE",{class:!0}),p(Ta).forEach(c),La=i(e),Ha=l(e,"P",{});var qt=p(Ha);Ma=h(qt,"Now lets setup octolapse in octoprint to use the script."),Na=l(qt,"BR",{}),Ua=h(qt,"\nIf you have not already, install the octolapse plugin through the plugin manager in the octoprint UI.\nAfter installing configure your printer (or use a preset)."),qt.forEach(c),Aa=i(e),Ba=l(e,"P",{});var Vt=p(Ba);Ya=h(Vt,"Go to "),qa=l(Vt,"CODE",{});var Wt=p(qa);Va=h(Wt,"octolapse"),Wt.forEach(c),Wa=h(Vt," -> "),ja=l(Vt,"CODE",{});var jt=p(ja);Ga=h(jt,"cameras"),jt.forEach(c),Ka=h(Vt," -> "),za=l(Vt,"CODE",{});var Gt=p(za);Fa=h(Gt,"Add profile"),Gt.forEach(c),Ja=h(Vt,"."),Qa=l(Vt,"BR",{}),Xa=h(Vt,"\nUnder "),Za=l(Vt,"CODE",{});var Kt=p(Za);$a=h(Kt,"Camera Type"),Kt.forEach(c),_a=h(Vt," select "),et=l(Vt,"CODE",{});var zt=p(et);at=h(zt,"External Camera - Script"),zt.forEach(c),tt=h(Vt,"."),ot=l(Vt,"BR",{}),rt=h(Vt,"\nThen under "),nt=l(Vt,"CODE",{});var Ft=p(nt);st=h(Ft,"External Camera Setup - Script"),Ft.forEach(c),ct=h(Vt," add the path to the snapshot.sh file"),Vt.forEach(c),it=i(e),lt=l(e,"PRE",{class:!0}),p(lt).forEach(c),pt=i(e),ht=l(e,"P",{});var Jt=p(ht);dt=h(Jt,"Use the test button to make sure it works."),Jt.forEach(c),ut=i(e),ft=l(e,"P",{});var Qt=p(ft);gt=h(Qt,"Scroll to the bottom of the window and save the settings."),Qt.forEach(c),Et=i(e),mt=l(e,"P",{});var Xt=p(mt);vt=h(Xt,"Under the octolaps tab you can now select your new camera and it will take a picture on each layer!"),Xt.forEach(c),this.h()},h(){d(R,"href","http://www.gphoto.org/doc/remote/"),d(R,"rel","nofollow"),u(A.src,B="/posts/octoprint-timelapse-using-external-camera/after.mp4")||d(A,"src","/posts/octoprint-timelapse-using-external-camera/after.mp4"),d(A,"type","video/mp4"),U.controls=!0,d(U,"class","svelte-vrp5t2"),d(L,"class","svelte-vrp5t2"),u(z.src,F="/posts/octoprint-timelapse-using-external-camera/before.mp4")||d(z,"src","/posts/octoprint-timelapse-using-external-camera/before.mp4"),d(z,"type","video/mp4"),K.controls=!0,d(K,"class","svelte-vrp5t2"),d(V,"class","svelte-vrp5t2"),d(T,"class","svelte-vrp5t2"),d(oe,"href","https://octoprint.org/download/"),d(oe,"rel","nofollow"),d(Pe,"class","language-undefined"),d(Le,"class","language-undefined"),d(Ae,"class","language-undefined"),d(Ke,"class","language-undefined"),d(Xe,"class","language-undefined"),d(aa,"class","language-undefined"),d(sa,"class","language-undefined"),d(Oa,"class","language-undefined"),d(Ta,"class","language-undefined"),d(lt,"class","language-undefined")},m(e,a){f(e,t,a),f(e,m,a),g(m,v),f(e,w,a),f(e,P,a),g(P,b),g(P,D),g(P,C),g(P,I),g(P,O),g(P,R),g(R,k),g(P,x),f(e,S,a),f(e,T,a),g(T,L),g(L,H),g(H,M),g(L,N),g(L,U),g(U,A),g(U,Y),g(T,q),g(T,V),g(V,W),g(W,j),g(V,G),g(V,K),g(K,z),g(K,J),f(e,Q,a),f(e,X,a),g(X,Z),f(e,$,a),f(e,_,a),g(_,ee),g(_,ae),g(_,te),g(_,oe),g(oe,re),g(_,ne),f(e,se,a),f(e,ce,a),g(ce,ie),g(ce,le),g(ce,pe),g(ce,he),g(he,de),g(ce,ue),f(e,fe,a),f(e,ge,a),g(ge,Ee),f(e,me,a),f(e,ve,a),g(ve,ye),f(e,we,a),f(e,Pe,a),Pe.innerHTML='<code class="language-undefined">ssh pi@&#123;your octopi ip&#125;</code>',f(e,be,a),f(e,De,a),g(De,Ce),g(De,Ie),g(Ie,Oe),g(De,Re),f(e,ke,a),f(e,xe,a),g(xe,Se),f(e,Te,a),f(e,Le,a),Le.innerHTML='<code class="language-undefined">sudo apt-get install gphoto2</code>',f(e,He,a),f(e,Me,a),g(Me,Ne),f(e,Ue,a),f(e,Ae,a),Ae.innerHTML='<code class="language-undefined">gphoto2 --auto-detect</code>',f(e,Be,a),f(e,Ye,a),g(Ye,qe),f(e,Ve,a),f(e,We,a),g(We,je),f(e,Ge,a),f(e,Ke,a),Ke.innerHTML='<code class="language-undefined">gphoto2 --auto-detect --set-config capturetarget=1 --trigger-capture</code>',f(e,ze,a),f(e,Fe,a),g(Fe,Je),f(e,Qe,a),f(e,Xe,a),Xe.innerHTML='<code class="language-undefined">cd scripts</code>',f(e,Ze,a),f(e,$e,a),g($e,_e),f(e,ea,a),f(e,aa,a),aa.innerHTML='<code class="language-undefined">sudo nano snapshot.sh</code>',f(e,ta,a),f(e,oa,a),g(oa,ra),f(e,na,a),f(e,sa,a),sa.innerHTML='<code class="language-undefined">#!/bin/sh\ngphoto2 --auto-detect --set-config capturetarget=1 --trigger-capture</code>',f(e,ca,a),f(e,ia,a),g(ia,la),g(ia,pa),g(pa,ha),g(ia,da),g(ia,ua),g(ua,fa),g(ia,ga),g(ia,Ea),g(Ea,ma),g(ia,va),g(ia,ya),g(ya,wa),g(ia,Pa),f(e,ba,a),f(e,Da,a),g(Da,Ca),f(e,Ia,a),f(e,Oa,a),Oa.innerHTML='<code class="language-undefined">chmod +x snapshot.sh</code>',f(e,Ra,a),f(e,ka,a),g(ka,xa),f(e,Sa,a),f(e,Ta,a),Ta.innerHTML='<code class="language-undefined">./snapshot.sh</code>',f(e,La,a),f(e,Ha,a),g(Ha,Ma),g(Ha,Na),g(Ha,Ua),f(e,Aa,a),f(e,Ba,a),g(Ba,Ya),g(Ba,qa),g(qa,Va),g(Ba,Wa),g(Ba,ja),g(ja,Ga),g(Ba,Ka),g(Ba,za),g(za,Fa),g(Ba,Ja),g(Ba,Qa),g(Ba,Xa),g(Ba,Za),g(Za,$a),g(Ba,_a),g(Ba,et),g(et,at),g(Ba,tt),g(Ba,ot),g(Ba,rt),g(Ba,nt),g(nt,st),g(Ba,ct),f(e,it,a),f(e,lt,a),lt.innerHTML='<code class="language-undefined">/home/pi/scripts/snapshot.sh</code>',f(e,pt,a),f(e,ht,a),g(ht,dt),f(e,ut,a),f(e,ft,a),g(ft,gt),f(e,Et,a),f(e,mt,a),g(mt,vt)},p(e,[t]){0&t&&a!==(a=y+" | Kasper Laursen")&&(document.title=a)},i:E,o:E,d(e){e&&c(t),e&&c(m),e&&c(w),e&&c(P),e&&c(S),e&&c(T),e&&c(Q),e&&c(X),e&&c($),e&&c(_),e&&c(se),e&&c(ce),e&&c(fe),e&&c(ge),e&&c(me),e&&c(ve),e&&c(we),e&&c(Pe),e&&c(be),e&&c(De),e&&c(ke),e&&c(xe),e&&c(Te),e&&c(Le),e&&c(He),e&&c(Me),e&&c(Ue),e&&c(Ae),e&&c(Be),e&&c(Ye),e&&c(Ve),e&&c(We),e&&c(Ge),e&&c(Ke),e&&c(ze),e&&c(Fe),e&&c(Qe),e&&c(Xe),e&&c(Ze),e&&c($e),e&&c(ea),e&&c(aa),e&&c(ta),e&&c(oa),e&&c(na),e&&c(sa),e&&c(ca),e&&c(ia),e&&c(ba),e&&c(Da),e&&c(Ia),e&&c(Oa),e&&c(Ra),e&&c(ka),e&&c(Sa),e&&c(Ta),e&&c(La),e&&c(Ha),e&&c(Aa),e&&c(Ba),e&&c(it),e&&c(lt),e&&c(pt),e&&c(ht),e&&c(ut),e&&c(ft),e&&c(Et),e&&c(mt)}}}const v={title:"How to use an external camera in octoprint",teaser:"Setting up octoprint on a Raspberry pi to use an external DSLR for making timelapses",date:"2021-12-11",image:"/posts/octoprint-timelapse-using-external-camera/thumb.jpg",categories:["Making","Other"]},{title:y,teaser:w,date:P,image:b,categories:D}=v;class C extends e{constructor(e){super(),a(this,e,null,m,t,{})}}export{C as default,v as metadata};
